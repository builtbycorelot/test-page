---
import type { CollectionEntry } from 'astro:content';

const { plan } = Astro.props as { plan: CollectionEntry<'plans'> };
---
<article class="card">
  <a href={`/plans/${plan.id}/`} class="card-media" aria-label={`View ${plan.data.title}`}>
    <img src={plan.data.heroImage} alt={`${plan.data.title} rendering`} loading="lazy" />
  </a>
  <div class="card-body">
    <p class="eyebrow">{plan.data.sqft} sqft • {plan.data.beds} beds • {plan.data.baths} baths</p>
    <h3><a href={`/plans/${plan.id}/`}>{plan.data.title}</a></h3>
    <p>{plan.data.summary}</p>
    {plan.data.tags && (
      <ul class="tag-row">
        {plan.data.tags.map((tag) => <li>{tag}</li>)}
      </ul>
    )}
  </div>
</article>

<style>
.card {
  border: 1px solid #ececec;
  border-radius: 12px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  background: #fff;
  box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.06);
}
.card-media img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  display: block;
}
.card-body {
  padding: 1rem 1.1rem 1.25rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.eyebrow {
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #8a8a8a;
  font-size: 0.75rem;
  margin: 0;
}
h3 {
  margin: 0;
}
h3 a {
  text-decoration: none;
  color: #0d2340;
}
h3 a:hover { color: #cc5500; }
.tag-row {
  list-style: none;
  display: flex;
  gap: 0.5rem;
  margin: 0;
  padding: 0;
  flex-wrap: wrap;
}
.tag-row li {
  background: #f6f0e9;
  color: #cc5500;
  padding: 0.25rem 0.6rem;
  border-radius: 999px;
  font-size: 0.8rem;
}
</style>
