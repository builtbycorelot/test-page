---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { absoluteUrl, getBasePath, prefixWithBase } from '../utils/paths';

interface Props {
  title?: string;
  description?: string;
  canonicalPath?: string;
  structuredData?: Record<string, unknown> | Record<string, unknown>[];
}

const { title, description, canonicalPath, structuredData } = Astro.props as Props;
const site = Astro.site ?? new URL('https://corelothomes.com');
const basePath = getBasePath(Astro.site);
const canonical = new URL(prefixWithBase(canonicalPath ?? Astro.url.pathname, basePath), site);
const dataBlocks = Array.isArray(structuredData)
  ? structuredData
  : structuredData
    ? [structuredData]
    : [];
const sharedOrganization = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: 'CORELOT Homes',
  url: site.toString(),
  contactPoint: {
    '@type': 'ContactPoint',
    telephone: '+1-540-785-7500',
    contactType: 'sales',
    email: 'Sales@corelot.net'
  },
  sameAs: [
    'https://www.wlmartinhomes.com'
  ]
};
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title ?? 'CORELOT Homes | Built for the way you live'}</title>
    {description && <meta name="description" content={description} />}
    <link rel="canonical" href={canonical.toString()} />
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title ?? 'CORELOT Homes'} />
    {description && <meta property="og:description" content={description} />}
    <meta property="og:url" content={canonical.toString()} />
    <meta property="og:image" content={absoluteUrl('/images/brands/corelot.svg', site)} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title ?? 'CORELOT Homes'} />
    {description && <meta name="twitter:description" content={description} />}
    <meta name="twitter:image" content={absoluteUrl('/images/brands/corelot.svg', site)} />
    <link rel="icon" href={absoluteUrl('/images/brands/corelot.svg', site)} type="image/svg+xml" />
    <style>
      :root {
        color-scheme: light;
        --accent: #cc5500;
        --text: #0d2340;
        --muted: #5f6980;
        --bg: #f8f9fb;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
        color: var(--text);
        background: #fff;
      }
      main {
        max-width: 1100px;
        padding: 1.5rem;
        margin: 0 auto;
      }
      a { color: var(--accent); }
      h1, h2, h3, h4 { color: var(--text); }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.35rem 0.65rem;
        background: #f6f0e9;
        color: var(--accent);
        border-radius: 999px;
        font-weight: 600;
        font-size: 0.9rem;
      }
    </style>
    <script type="application/ld+json">{JSON.stringify(sharedOrganization)}</script>
    {dataBlocks.map((block) => (
      <script type="application/ld+json">{JSON.stringify(block)}</script>
    ))}
  </head>
  <body>
    <Header basePath={basePath} />
    <main>
      <slot />
    </main>
    <Footer basePath={basePath} />
  </body>
</html>
