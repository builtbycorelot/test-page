---
import BaseLayout from '../layouts/BaseLayout.astro';
import PlanCard from '../components/PlanCard.astro';
import LandCard from '../components/LandCard.astro';
import { getCollection } from 'astro:content';

const plans = (await getCollection('plans')).sort((a, b) => b.data.sqft - a.data.sqft);
const land = (await getCollection('land')).sort((a, b) => a.data.address.localeCompare(b.data.address));

const assetPages = [
  { title: 'Brand capability matrix', href: '/assets/brand-capability-matrix.html' },
  { title: 'Brand guide', href: '/assets/brand-guide.html' },
  { title: 'Community brochure', href: '/assets/community-brochure.html' },
  { title: 'Email template', href: '/assets/email-template.html' },
  { title: 'House plan brochures', href: '/assets/house-plan-brochures.html' },
  { title: 'Single home email', href: '/assets/single-home-email.html' },
  { title: 'Single home social', href: '/assets/single-home-social.html' },
  { title: 'Site plan exhibit', href: '/assets/site-plan-exhibit.html' },
  { title: 'Spot lot flyer', href: '/assets/spot-lot-flyer.html' },
  { title: 'Subdivision email', href: '/assets/subdivision-email.html' }
];

const marketingPages = [
  { title: 'Add Scott Hine', href: '/marketing/add-scott-hine.html' },
  { title: 'Analytics', href: '/marketing/analytics.html' },
  { title: 'Google Ads', href: '/marketing/google-ads.html' },
  { title: 'Houzz', href: '/marketing/houzz.html' },
  { title: 'Lot catalog', href: '/marketing/lot-catalog.html' },
  { title: 'Plan catalog', href: '/marketing/plan-catalog.html' },
  { title: 'White Oak sign', href: '/marketing/white-oak-sign.html' }
];

const blogPages = [
  'add-value-home','affordable-meaning','beautiful-lawn-guide','build-on-your-lot','construction-perm-loan-benefits','corelot-design-process','corelot-products','financing-overview','home-style-selection','house-lot-options','house-match','lot-affordability','lot-feasibility','low-maintenance-homes','planning-pricing-wlmartin','production-vs-custom','restaurant-vs-builder','sales-process','the-lot','warranty-cost','what-is-quality','who-is-corelot','why-rent-own'
].map((slug) => ({
  title: slug.split('-').map((part) => part.charAt(0).toUpperCase() + part.slice(1)).join(' '),
  href: `/blogs/${slug}.html`
}));

const otherPages = [
  { title: 'Legacy index', href: '/legacy-index.html' },
  { title: 'Operations map', href: '/CORELOT%20Operations%20Map.html' },
  { title: 'Invoice & Statement Standard', href: '/INVOICE_AND_STATEMENT_STANDARD.md' }
];

const structuredData = [
  {
    '@context': 'https://schema.org',
    '@type': 'ItemList',
    name: 'CORELOT Plans',
    itemListElement: plans.map((plan, index) => ({
      '@type': 'ListItem',
      position: index + 1,
      url: `/plans/${plan.slug}/`,
      name: plan.data.title,
    })),
  },
  {
    '@context': 'https://schema.org',
    '@type': 'ItemList',
    name: 'Available Land',
    itemListElement: land.map((lot, index) => ({
      '@type': 'ListItem',
      position: index + 1,
      url: `/land/${lot.slug}/`,
      name: lot.data.address,
    })),
  },
];
---
<BaseLayout
  title="CORELOT Homes | Built for the way you live"
  description="On-your-lot homes, WL Martin inspired plans, and move-in ready lots across Virginia and the DC metro area."
  canonicalPath="/"
  structuredData={structuredData}
>
  <section class="hero">
    <div class="hero-copy">
      <p class="pill">Built for the way you live</p>
      <h1>Build your custom home on your land‚Äîwith full transparency from day one.</h1>
      <p class="lede">CORELOT Homes specializes in on-your-lot construction across Northern and Central Virginia. We guide you through every phase‚Äîfrom design retainer to final walkthrough‚Äîensuring you understand costs, timelines, and site challenges before breaking ground.</p>
      <div class="hero-actions">
        <a class="btn primary" href="/contact">Schedule Consultation</a>
        <a class="btn ghost" href="/process">See Our Process</a>
      </div>
    </div>
    <div class="hero-panel">
      <p class="eyebrow">Why CORELOT?</p>
      <p>Unlike production builders, we start with your land and your vision. Our design retainer process ensures you have a complete, site-specific budget before committing to construction.</p>
      <ul class="feature-list">
        <li>Proven WL Martin Homes & custom plans</li>
        <li>Transparent line-item budgeting</li>
        <li>Site-specific cost assessment upfront</li>
        <li>Construction-perm loan guidance</li>
      </ul>
    </div>
  </section>

  <section class="value-props">
    <h2>The CORELOT difference</h2>
    <div class="props-grid">
      <div class="prop-card">
        <div class="prop-icon">üìã</div>
        <h3>Design Retainer First</h3>
        <p>We assess your lot, select a plan, and develop a detailed budget <em>before</em> you commit to construction. No surprises.</p>
      </div>
      <div class="prop-card">
        <div class="prop-icon">üèóÔ∏è</div>
        <h3>Complete Site Services</h3>
        <p>From clearing and grading to septic, well, and utilities‚Äîwe coordinate every aspect of site preparation.</p>
      </div>
      <div class="prop-card">
        <div class="prop-icon">üí∞</div>
        <h3>Lender Partnerships</h3>
        <p>We work with trusted construction-perm lenders who understand on-your-lot financing and can guide you through the process.</p>
      </div>
      <div class="prop-card">
        <div class="prop-icon">üìç</div>
        <h3>Local Expertise</h3>
        <p>Decades of experience building in Stafford, Spotsylvania, Culpeper, Fredericksburg, and the DC metro area.</p>
      </div>
    </div>
  </section>

  <section class="how-it-works">
    <h2>How it works</h2>
    <p class="section-intro">Building on your lot requires careful planning. Here's our proven process:</p>
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-number">1</div>
        <h3>Consultation</h3>
        <p>We discuss your land, budget, and vision. No charge for this initial call.</p>
      </div>
      <div class="step-card">
        <div class="step-number">2</div>
        <h3>Design Retainer</h3>
        <p>Site evaluation, plan selection, and detailed budgeting (4‚Äì8 weeks). Fee credited to construction.</p>
      </div>
      <div class="step-card">
        <div class="step-number">3</div>
        <h3>Permitting & Contract</h3>
        <p>We finalize the contract, submit permits, and coordinate with your lender (6‚Äì12 weeks).</p>
      </div>
      <div class="step-card">
        <div class="step-number">4</div>
        <h3>Construction</h3>
        <p>Site prep, foundation, framing, mechanicals, and finishes (7‚Äì10 months).</p>
      </div>
    </div>
    <p class="cta-link"><a href="/process">See the complete build timeline ‚Üí</a></p>
  </section>

  <section>
    <div class="section-heading">
      <h2>Featured plans</h2>
      <a href="/plans">See all plans</a>
    </div>
    <div class="grid">
      {plans.map((plan) => <PlanCard plan={plan} />)}
    </div>
  </section>

  <section>
    <div class="section-heading">
      <h2>Available land</h2>
      <a href="/land">See all land</a>
    </div>
    <div class="grid">
      {land.map((parcel) => <LandCard parcel={parcel} />)}
    </div>
  </section>

  <section class="info-panels">
    <article>
      <h3>Our Process</h3>
      <p>Step-by-step guide from consultation to final walkthrough. Understand what to expect at each phase.</p>
      <a href="/process">View the build process ‚Üí</a>
    </article>
    <article>
      <h3>Financing Guidance</h3>
      <p>Construction-perm loan overview, budget components, and trusted lender partners.</p>
      <a href="/financing">Learn about financing ‚Üí</a>
    </article>
    <article>
      <h3>Frequently Asked Questions</h3>
      <p>Answers to common questions about land requirements, timelines, costs, and more.</p>
      <a href="/faq">Browse FAQs ‚Üí</a>
    </article>
    <article>
      <h3>About CORELOT</h3>
      <p>Our story, service area, WL Martin partnership, and what sets us apart.</p>
      <a href="/about">Learn about us ‚Üí</a>
    </article>
  </section>

  <section class="cta-banner">
    <h2>Ready to build on your land?</h2>
    <p>Schedule a complimentary consultation to discuss your lot, budget, and timeline. We'll provide honest guidance on feasibility and next steps.</p>
    <a class="btn primary" href="/contact">Get Started Today</a>
  </section>

  <section id="library">
    <h2>Full site library</h2>
    <p>Every existing page remains available and is linked below for fast access.</p>
    <div class="link-grid">
      <div>
        <h3>Blogs</h3>
        <ul>
          {blogPages.map((page) => (
            <li><a href={page.href}>{page.title}</a></li>
          ))}
        </ul>
      </div>
      <div>
        <h3>Marketing</h3>
        <ul>
          {marketingPages.map((page) => (
            <li><a href={page.href}>{page.title}</a></li>
          ))}
        </ul>
      </div>
      <div>
        <h3>Assets</h3>
        <ul>
          {assetPages.map((page) => (
            <li><a href={page.href}>{page.title}</a></li>
          ))}
        </ul>
      </div>
      <div>
        <h3>Site Pages</h3>
        <ul>
          <li><a href="/plans">Plans Index</a></li>
          <li><a href="/land">Land Index</a></li>
          <li><a href="/about">About CORELOT</a></li>
          <li><a href="/process">Build Process</a></li>
          <li><a href="/financing">Financing Guide</a></li>
          <li><a href="/faq">Frequently Asked Questions</a></li>
          <li><a href="/contact">Contact Us</a></li>
        </ul>
      </div>
      <div>
        <h3>Other references</h3>
        <ul>
          {otherPages.map((page) => (
            <li><a href={page.href}>{page.title}</a></li>
          ))}
        </ul>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
.hero {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-bottom: 3rem;
  align-items: center;
}
.hero-copy h1 {
  margin-top: 0.35rem;
  font-size: clamp(1.8rem, 3vw, 2.4rem);
  line-height: 1.2;
}
.lede {
  font-size: 1.05rem;
  color: #4b5563;
  line-height: 1.6;
}
.hero-panel {
  background: linear-gradient(135deg, #0d2340, #16325b);
  color: #fff;
  padding: 1.5rem;
  border-radius: 16px;
  box-shadow: 0 1rem 2rem rgba(0,0,0,0.1);
}
.hero-panel .feature-list {
  margin: 1rem 0 0;
  padding-left: 1.25rem;
}
.hero-panel li { margin-bottom: 0.35rem; color: #cbd5e1; }
.hero-actions { display: flex; gap: 0.75rem; margin-top: 1rem; flex-wrap: wrap; }
.btn {
  display: inline-flex;
  padding: 0.75rem 1.5rem;
  border-radius: 10px;
  text-decoration: none;
  font-weight: 700;
  border: 2px solid transparent;
  transition: all 0.2s;
}
.btn.primary {
  background: var(--accent);
  color: #fff;
}
.btn.primary:hover {
  background: #b34c00;
  transform: translateY(-2px);
}
.btn.ghost {
  border-color: var(--accent);
  color: var(--accent);
}
.btn.ghost:hover {
  background: rgba(204, 85, 0, 0.1);
}

.value-props {
  background: #f8f9fb;
  padding: 2.5rem;
  border-radius: 16px;
  margin-bottom: 3rem;
}
.value-props h2 {
  color: #0d2340;
  text-align: center;
  margin-top: 0;
  margin-bottom: 2rem;
}
.props-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.5rem;
}
.prop-card {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 1.5rem;
  text-align: center;
}
.prop-icon {
  font-size: 2.5rem;
  margin-bottom: 0.75rem;
}
.prop-card h3 {
  color: #0d2340;
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}
.prop-card p {
  color: #4b5563;
  font-size: 0.95rem;
  line-height: 1.6;
  margin: 0;
}

.how-it-works {
  margin-bottom: 3rem;
}
.how-it-works h2 {
  color: #0d2340;
  text-align: center;
  margin-bottom: 0.5rem;
}
.section-intro {
  text-align: center;
  color: #6b7280;
  font-size: 1.05rem;
  margin-bottom: 2rem;
}
.steps-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1.5rem;
  margin-bottom: 1.5rem;
}
.step-card {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 1.5rem;
  text-align: center;
}
.step-number {
  width: 3rem;
  height: 3rem;
  background: linear-gradient(135deg, #cc5500, #f18f01);
  color: #fff;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 1.3rem;
  margin-bottom: 1rem;
}
.step-card h3 {
  color: #0d2340;
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}
.step-card p {
  color: #4b5563;
  font-size: 0.95rem;
  line-height: 1.6;
  margin: 0;
}
.cta-link {
  text-align: center;
  margin-top: 1.5rem;
}
.cta-link a {
  color: #cc5500;
  font-weight: 700;
  text-decoration: none;
}
.cta-link a:hover {
  text-decoration: underline;
}

.section-heading {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 1rem;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
}
.info-panels {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.25rem;
  margin-top: 3rem;
  margin-bottom: 3rem;
}
.info-panels article {
  border: 1px solid #e5e7eb;
  border-left: 4px solid #cc5500;
  border-radius: 12px;
  padding: 1.5rem;
  background: #f8f9fb;
  transition: box-shadow 0.2s;
}
.info-panels article:hover {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}
.info-panels h3 {
  color: #0d2340;
  margin-top: 0;
  margin-bottom: 0.5rem;
}
.info-panels p {
  color: #4b5563;
  font-size: 0.95rem;
  line-height: 1.6;
  margin-bottom: 0.75rem;
}
.info-panels a {
  color: #cc5500;
  font-weight: 600;
  text-decoration: none;
}
.info-panels a:hover {
  text-decoration: underline;
}

.cta-banner {
  background: linear-gradient(135deg, #0d2340, #16325b);
  color: #fff;
  padding: 2.5rem;
  border-radius: 16px;
  text-align: center;
  margin-bottom: 3rem;
}
.cta-banner h2 {
  color: #fff;
  margin-top: 0;
  margin-bottom: 0.75rem;
}
.cta-banner p {
  color: #cbd5e1;
  font-size: 1.05rem;
  line-height: 1.6;
  max-width: 60ch;
  margin: 0 auto 1.5rem;
}

.link-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap: 1rem;
}
.link-grid ul { padding-left: 1rem; }

#library {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 2px solid #e5e7eb;
}
</style>
